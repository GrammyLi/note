## 输入 url 页面发生什么

1. url => DNS 转 IP 地址

2. 发起 TCP 连接（三次握手）

3. 发送 HTTP 请求

4. 服务器处理收到的请求并将处理结果响应至浏览器（http 状态码）

5. 关闭 TCP 连接（四次挥手）

6. 浏览器解析渲染页面（解析 HTML、CSS、JS 文件并渲染

## 三次握手

```js
客服端 （SYN包） => 服务端
客服端 <= （SYN+ACK） 服务端
客服端 （好的 我知道了 ACK） => 服务端
```

先客户端向服务端发送一包连接请求数据（SYN 包）， 服务端如果同意，会回复 SYN+ACK 包， 客户端收到后回复一包 ACK 包——连接建立， 这个过程三次发包，故称之为三次握手

## 四次挥手

```js
客服端 （FIN 结束请求了）=> 服务端

客服端 <= （ACK 确认） 服务端

客服端 <= （FIN 老子发完数据了） 服务端

客服端 （好的 我知道了 ACK） => 服务端
```

客户端主动发起连接关闭请求，需要发给服务端一个 FIN 包，自己进入终止等待 1 状态，这是第一次挥手。 服务端收到 FIN 包回复一个 ACK 包，自己进入关闭等待状态，客户端进入终止等待 2 状态，这是第二次挥手。 此时服务端仍然可以发送数据，客户端可以接收数据，服务端把未发送的数据都发送完毕之后，再发送一个 FIN 包，进入最后确认状态，这是第三次挥手。 客户端收到后发送 ACK 包，进入超时等待状态，经过超时时间后关闭连接，服务端收到 ACK 包后立即关闭连接，这是第四次挥手。

## https 加密过程

```js
客服端 （请求）=> 服务端

客服端 <= （数字证书（包括公钥）） 服务端

客服端 （先验证证书是否可信，生成一个随机的对称加密密钥，并使用服务器的公钥加密该密钥）=> 服务端

客服端 <= （用自己的私钥解密客户端发送过来的对称加密密钥） 服务端
```

客户端向服务器发送一个 HTTPS 请求。 服务器将自己的数字证书（包括公钥）发送给客户端。 客户端验证服务器的证书是否可信。 如果证书可信，客户端生成一个随机的对称加密密钥，并使用服务器的公钥加密该密钥，并将加密后的密钥发送给服务器。 服务器使用自己的私钥解密客户端发送过来的对称加密密钥。 客户端和服务器双方都拥有了同一个对称加密密钥，之后的通信都使用该密钥进行加密和解密。

## http1.0、1.1、2.0、3.0






